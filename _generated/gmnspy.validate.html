

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>gmnspy.validate &mdash; GMNSpy  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="gmnspy.schema" href="gmnspy.schema.html" />
    <link rel="prev" title="gmnspy.in_out" href="gmnspy.in_out.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GMNSpy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spec.html">GMNS Schema</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../autodoc.html">GMNSpy Classes and Functions</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../autodoc.html#core-functions">Core Functions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="gmnspy.in_out.html">gmnspy.in_out</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">gmnspy.validate</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmnspy.schema.html">gmnspy.schema</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autodoc.html#conversion-functions">Conversion Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autodoc.html#util-functions">Util Functions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMNSpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../autodoc.html">GMNSpy Classes and Functions</a> &raquo;</li>
        
      <li>gmnspy.validate</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_generated/gmnspy.validate.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-gmnspy.validate">
<span id="gmnspy-validate"></span><h1>gmnspy.validate<a class="headerlink" href="#module-gmnspy.validate" title="Permalink to this headline">¶</a></h1>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#gmnspy.validate.apply_schema_to_df" title="gmnspy.validate.apply_schema_to_df"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_schema_to_df</span></code></a>(df[, schema_file, …])</p></td>
<td><p>Evaluates a gmns table against a specified data schema.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gmnspy.validate.confirm_required_files" title="gmnspy.validate.confirm_required_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">confirm_required_files</span></code></a>(resource_df)</p></td>
<td><p>Check required files exist.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gmnspy.validate.update_resources_based_on_existance" title="gmnspy.validate.update_resources_based_on_existance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_resources_based_on_existance</span></code></a>(resource_df)</p></td>
<td><p>Update resource dataframe based on which files exist in the directory.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gmnspy.validate.validate_foreign_key" title="gmnspy.validate.validate_foreign_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_foreign_key</span></code></a>(source_s, reference_s)</p></td>
<td><p>Checks that the source_s series links to a valid reference_s series</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gmnspy.validate.validate_foreign_keys" title="gmnspy.validate.validate_foreign_keys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_foreign_keys</span></code></a>(gmns_net_d, resource_df)</p></td>
<td><p>Finds foreign keys in schemas of each GMNS table and validates that they link to a valid series which has (1) unique IDs, and (2) contains the values of the referring series.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt id="gmnspy.validate.apply_schema_to_df">
<code class="sig-prename descclassname">gmnspy.validate.</code><code class="sig-name descname">apply_schema_to_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">schema_file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">originating_file</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmnspy/validate.html#apply_schema_to_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmnspy.validate.apply_schema_to_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates a gmns table against a specified data schema.
(1) Checks required fields exist
(2) Coerces field types
(3) Evaluates constraints that are firmly enforced
(4) Evaluates warnings for strange values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – Dataframe of the gmns table</p></li>
<li><p><strong>schema_file</strong> – The table schema that will be applied.  If not supplied,
will look for the schema in the directory that matches the name in
originating_file (i.e. link, node)</p></li>
<li><p><strong>originating_file</strong> – base name of the originating file (i.e. link.csv, node)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>DataFrame with fields coerced to appropriate type and constraints</dt><dd><p>and warnings evaluated.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gmnspy.validate.confirm_required_files">
<code class="sig-prename descclassname">gmnspy.validate.</code><code class="sig-name descname">confirm_required_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">resource_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmnspy/validate.html#confirm_required_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmnspy.validate.confirm_required_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Check required files exist. Will fail if they don’t.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource_df</strong> – Dataframe with a row for each GMNS table including
the the columns “fullpath”, “name”, and “required” (boolean).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gmnspy.validate.read_schema">
<code class="sig-prename descclassname">gmnspy.validate.</code><code class="sig-name descname">read_schema</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema_file</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmnspy/schema.html#read_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmnspy.validate.read_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads in schema from schema json file and returns as dictionary.</p>
<p>##TODO validate schema itself</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema_file</strong> – File location of the schema json file.</p>
</dd>
</dl>
<p>Returns: The schema as a dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gmnspy.validate.update_resources_based_on_existance">
<code class="sig-prename descclassname">gmnspy.validate.</code><code class="sig-name descname">update_resources_based_on_existance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">resource_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmnspy/validate.html#update_resources_based_on_existance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmnspy.validate.update_resources_based_on_existance" title="Permalink to this definition">¶</a></dt>
<dd><p>Update resource dataframe based on which files exist in the directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>resource_df</strong> – Dataframe with a row for each GMNS table including
the the columns “fullpath” and “name”.</p>
</dd>
</dl>
<dl class="simple">
<dt>Returns: Updated version of resource dataframe without non-existant</dt><dd><p>files.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gmnspy.validate.validate_foreign_key">
<code class="sig-prename descclassname">gmnspy.validate.</code><code class="sig-name descname">validate_foreign_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_s</span></em>, <em class="sig-param"><span class="n">reference_s</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmnspy/validate.html#validate_foreign_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmnspy.validate.validate_foreign_key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Checks that the source_s series links to a valid reference_s series</dt><dd><p>which has (1) unique IDs, and (2) contains the values of the
referring series.</p>
</dd>
</dl>
<p>source_s: series containing values that reference foreign key values in reference_s.</p>
<p>reference_s: series of foreign key values.</p>
<p>Returns: a list of error messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gmnspy.validate.validate_foreign_keys">
<code class="sig-prename descclassname">gmnspy.validate.</code><code class="sig-name descname">validate_foreign_keys</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gmns_net_d</span></em>, <em class="sig-param"><span class="n">resource_df</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gmnspy/validate.html#validate_foreign_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gmnspy.validate.validate_foreign_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds foreign keys in schemas of each GMNS table and validates that
they link to a valid series which has (1) unique IDs, and (2) contains
the values of the referring series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gmns_net_d</strong> – Dictionary containing dataframes of all the GMNS tables
for the network keyed to their file names (i.e. “link”).</p></li>
<li><p><strong>resource_df</strong> – Dataframe with a row for each GMNS table which contains
the field “fullpath_schema” for the schema locations for
each GMNS table which is where foreign keys are specified.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt id="gmnspy.validate.Dict">
<code class="sig-prename descclassname">gmnspy.validate.</code><code class="sig-name descname">Dict</code><a class="headerlink" href="#gmnspy.validate.Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>The central part of internal API.</p>
<p>This represents a generic version of type ‘origin’ with type arguments ‘params’.
There are two kind of these aliases: user defined and special. The special ones
are wrappers around builtin collections and ABCs in collections.abc. These must
have ‘name’ always set. If ‘inst’ is False, then the alias can’t be instantiated,
this is used by e.g. typing.List and typing.Dict.</p>
<p>alias of Dict</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gmnspy.schema.html" class="btn btn-neutral float-right" title="gmnspy.schema" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gmnspy.in_out.html" class="btn btn-neutral float-left" title="gmnspy.in_out" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Elizabeth Sall

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>